**自动挂载Automount:**

特点：挂载是由访问产生；卸载是由超时产生；依赖于后台的utofs服务

思路：

1.所有的监控都是由一个程序完成  autofs

2.服务启动后才会监控挂载的设备

3.修改配置文件来指定需要监控的设备

需求1：让系统自动挂载/dev/sdb5设备，如果2分钟没有被用自动卸载

步骤：

1)安装autofs软件

```
root@server1 ~]# yum install -y autofs
```

2） 编写配置为文件

```
root@server1 ~]# vim /etc/auto.master
/mnt/    /etc/auto.cdrom
    # /mnt/   是一级挂载点，必须事先存在，不是最终的挂载点
    # /etc/auto.cdrom    是对应的挂载点的配置文件，可以自定义，但是必须以auto.作为开头
root@server1 ~]# vim /etc/auto.cdrom
cdrom    -fstype=iso9660    :/dev/sr0       
    #cdrom            二级挂载点，必须是相对路径
    #-fstype=iso9660  指定文件系统，类型
    #:/dev/sr0        #指定需要挂载的文件系统，路径
```

3） 启动服务

```
root@server1 ~]# systemctl start    autofs    #启动服务
```

4） 测试

```
root@server1 ~]# df -h
文件系统                 容量  已用  可用 已用% 挂载点
/dev/mapper/centos-root   17G  3.8G   14G   22% /
devtmpfs                 898M     0  898M    0% /dev

/dev/sda1               1014M  146M  869M   15% /boot
tmpfs                    182M     0  182M    0% /run/user/0
root@server1 ~]# ls /mnt/cdrom/        #查看此目录下的文件
CentOS_BuildTag  EULA  images    LiveOS    repodata              RPM-GPG-KEY-CentOS-Testing-7
EFI              GPL   isolinux  Packages  RPM-GPG-KEY-CentOS-7  TRANS.TBL
[root@server1 ~]# df -h
文件系统                 容量  已用  可用 已用% 挂载点
/dev/mapper/centos-root   17G  3.8G   14G   22% /
devtmpfs                 898M     0  898M    0% /dev

/dev/sda1               1014M  146M  869M   15% /boot
tmpfs                    182M     0  182M    0% /run/user/0
/dev/sr0                 918M  918M     0  100% /mnt/cdrom        #自动挂载成功
```

5） 配置自动挂载，失效时间

```
[root@server1 ~]#  vim /etc/autofs.conf        #全局配置文件，对所有的自动挂载都生效
timeout=300    #300秒未使用自动卸载
[root@server1 ~]#  vim /etc/auto.master    #可以针对某个挂载点，单独配置
/mnt     /etc/auto.cdrom    -t  120    #配置120秒未使用自动卸载
[root@server1 ~]# systemctl restart autofs    #重启服务
```