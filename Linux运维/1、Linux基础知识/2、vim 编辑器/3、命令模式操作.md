**命令模式操作**

# **1、移动光标**

## **1）上下左右移动光标**

```javascript
上、下、左、右方向键 移动光标
H、j、k、l 移动光标
```

## **2）把光标移动到文件头或尾**

```javascript
gg 移动到文件头
G 移动到文件尾（shift+g）
```

## **3）移动到行首或行尾**

```javascript
^ 移动到行首
$ 移动到行尾
```

## **4）移动到指定行**

```javascript
:n 移动到第几行
```

**这里 n 是数字，准备移动到第几行，就用哪个数字。**

## **5）单词跳转**

```javascript
w：下个单词的词首
e：下个单词的词尾
b：上个单词的词首
#command：跳转#个单词
```

## **6）行首行尾跳转**

```javascript
^：行首（非空白字符）
0：行首
$：行尾
```

# **2、 删除 或剪切**

## **1）删除字母**

```javascript
x 删除单个字母
nx 删除 n 个字母
```

n 是数字，如果打算从光标位置删除连续的 10 个字母，可以使用“10x”即可。删除字母并不符



合使用习惯，我们更习惯在编辑模式中，用“Backspace”键删除字母。

## **2）删除整行或剪切**

```javascript
dd 删除单行
ndd 删除多行
:n1,n2d 删除指定范围的行
```

```javascript
d：删除，配合光标跳转
d^
d$
d0
dw
de
db
dd：删除光标所在行
#dd：删除多行
```

删除整行或多行，这是比较常用的删除方法。这里的 dd 快捷键既是删除，也是剪切。删除内容

放入了剪切板，如果不粘贴就是删除，如果粘贴就是剪切。粘贴方法如下：

```javascript
p 粘贴到光标后
P（大） 粘贴到光标前
```

## **3）从光标所在行删除到文件尾**

一直有同学问超哥，是否可以删除整篇文档，vim 没有删除整篇文档的快捷键，但是可以这样：

```javascript
dG 从光标所在行删除到文件尾
```

“d”是删除行，“G”是文件尾，连起来就是从光标所在行删除到文件尾。如果把光标放在文件

首，那么“dG”就变成了删除整篇文档了。

# **3、 复制**

```javascript
yy 复制单行
nyy 复制多行
```

复制之后的粘贴，依然可以使用 p 键或 P（大）键

# **4、 撤销**

```javascript
u 撤销
ctrl+r 反撤销
```

“u”键能一直撤销到文件打开时的状态，类似 Windows 下“ctrl+z”键的作用。

“ctrl+r”能一直反撤销到最后一次操作状态，类似 Windows 下“ctrl+y”键的作用。

# **5、替换**

```javascript
r 替换光标所在处的字符
R 从光标所在处开始替换字符，按 ESC 结束
```

“r”键替换单一字符，不用进入输入模式，实际使用时，比进入输入模式删除后再修改，要方

便。

```javascript
y 复制 yy 3yy ygg yG (以行为单位)
d  剪切 dd 3dd dgg dG (以行为单位)
p  粘贴
x  删除光标所在的字符
D  从光标处删除到行尾
u  undo撤销
^r redo重做
r  可以用来修改一个字符
```

# **6、vim 配置文件**

这次末行模式参数设置，多数需要在 vim 中才能生效。

设置参数 含 义

- 

```javascript
:set nu
:set nonu
#显示与取消行号。
```

- 

```javascript
:syntax on
:syntax off
#是否依据语法显示相关的颜色帮助。在 Vim 中修改相关的配置文件或
#Shell 脚本文件时（如前面示例的脚本/etc/init.d/sshd），默认会显
#示相应的颜色，用来帮助排错。如果觉得颜色产生了干扰，则可以取消此设置
```

- 

```javascript
:set hlsearch 	#设置是否将查找的字符串高亮显示。默认是 set hlsearch 高亮显示
:set nohlsearch	#取消高亮显示
```

- 

```javascript
:set ruler
:set noruler
#设置是否显示右下角的状态栏。默认是 set ruler 显示
```

- 

```javascript
:set showmode
:set noshowmode
#设置是否在左下角显示如“—INSERT--”之类的状态栏。默认是 setshowmode 显示
```

- 

```javascript
:set list
:set nolist
#设置是否显示隐藏字符（Tab 键用“^I”表示，回车符用“$”表示）。
#默认是 nolist 显示。如果使用 set list 显示隐藏字符，类似“cat –A文件名”。
```

vim 支持更多的设置参数，可以通过“:set all”进行查看。

大家会发现，这些设置参数都只是临时生效，一旦关闭文件再打开，又需要重新输入。如果想要

永久生效，需要手工建立 vim 的配置文件“~/.vimrc”（如果没有这个文件，自己创建 touch ~/.vimrc),把你需要的参数写入配置文件就永久生效了。

补充：Windows 下回车符在 Linux 中是用“^M$”符号显示，而不是“$”符。这样会导致 Windows

下编辑的程序脚本，无法在 Linux 中执行。这时可以通过命令“dos2unix”，把 Windows 格式转为 Linux

格式，当然反过来“unix2dos”命令就是把 Linux 格式转为 Windows 格式。这两个命令默认没有安装，

需要手工安装才能使用。

# **7、查找**

```javascript
/ 查找内容 从光标所在行向下查找
? 查找内容 从光标所在行向上搜索
n 下一个
N 上一个
```

# **8、 替换**

```javascript
:1,10s/old/new/g 		#替换 1 到 10 行的所有 old 为 new
:%s/old/new/g 		#替换整个文件的 old 为 new
```

替换字符串，我举几个例子：在 shell 中“#”开头是注释，那我是否可以注释文件的前 10 行呢？

手工一个一个注释很麻烦，那么批量替换吧：

```javascript
:1,10s/^/#/g 		#注释 1 到 10 行
:1,10s/^#//g 		#取消注释
```

而在 C 语言，PHP 语言等大多数语言中，是使用“//”开头作为注释的，我们当然可以用 vim 来

写这些程序语言脚本，那么批量加入“//”注释吧：

```javascript
:1,10s/^/\/\//g 		#1 到 10 行，行首加入//
:1,10s/^\/\///g 		#取消 1 到 10 行行首的//
```

```javascript
:范围 s/old/new/选项
:1,5 s/root/aaron/ 从1-5行的root 替换为aaron 每行替换第一个
:5,$ s/root/aaron/ $表示最后一行
:1,$ s/root/aaron/g = :% s/root/aaron/g  %表示全文 g表示全局
:% s#/dev/sda#/var/ccc#g
:,8 s/root/aaron/ 从当前行到第8行
:4,9 s/^#//       4-9行的开头#替换为空
:5,10 s/.*/#&/ 5-10前加入#字符(.*整行，&引用查找的内容)
```

# **9、读写另存为**

```javascript
:w 存储到当前文件
:w /tmp/aaa.txt 另存为/tmp/aaa.txt
:1,3 w /tmp/2.txt 将1-3行保存到文件
:r /etc/hosts 读入文件到当前行后
:5 r /etc/hosts 读入文件到第5行后
```

# **10、环境设置**

```javascript
行号
显示：set number，简写为set nu
取消显示：set nonumber，简写为set nonu
括号匹配
匹配：set showmatch，简写为set sm
取消：set nosm
自动缩进
启用：set ai
禁用：set noai
高亮搜索
启用：set hlsearch
禁用：set nohlsearch
语法高亮
启用：syntax on
禁用：syntax off
忽略字符的大小写
启用：set ic
不忽略：set noic
获取帮助
: help
```

# **11、永久环境**

```javascript
/etc/vimrc 影响所有系统用户
~/.vimrc 影响某一个用户
```