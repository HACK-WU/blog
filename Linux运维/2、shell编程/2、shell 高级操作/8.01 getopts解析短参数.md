**getopt自动解析参数脚本**

```shell
#!/bin/bash

declare -A optdic
function optparse {
    local opts="$1"
    shift 1 
    local opt 
    local OPTARG
    while getopts "$opts" opt
    do
        local res=$(echo "$opts" | grep -q "$opt:";echo $?)
        [ "$res" -eq 0 ] && optdic["$opt"]="$OPTARG" ||  optdic["$opt"]="true"
    done        
    shift $(($OPTIND-1))
    [ -n  "$*" ] && optdic[other]="$*"
}

opts="h:m:uw"

#会将opts指定的短参数，作为key,接收到的参数作为value.
#然后保存到optdic这个关联数组中。
#对于额外的，参数将会以“other” 作为key，保存到关联数组中。
#后面要取用某个参数的值，直接从optdic这个关联数组中获即可。
optparse "$opts"  $*  

echo ${!optdic[*]}

for index in ${!optdic[*]}
do
    echo $index  ${optdic[$index]}
done

```