# **1、运行级别**

**Linux有默认7个运行级别**

| 运行级别 | 含     义 | 
| -- | -- |
| 0   | 关机 | 
| 1 | 单用户模式，可以想象为windows的安全模式，主要用于系统修复 | 
| 2 | 不完全的命令行模式，不含NFS服务 | 
| 3 | 完全的命令行模式，就是标准字符界面 | 
| 4 | 系统保留 | 
| 5 | 图形界面 | 
| 6 | 重启 | 


在 Linux 系统中可以使用 runlevel 命令来查看系统的运行级别，命令如下：

```javascript
[root@localhost ~]# runlevel
N 3
#N 代表进入这个级别前，上一个是哪个级别。3 代表当前级别
```

在这个命令的结果中，“N 3”中的 N 代表进入这个级别前，上一个级别是什么，3 代表当前级别。

“N”就是 None 的意思，也就是说系统是开机直接进入的 3 运行级别，没有上一个运行级别。那如果是从图形界面切换到字符界面的话，再查看运行级别，就应该是这样的：

```javascript
[root@localhost ~]# runlevel
5 3
#代表是由 5 级别进入的 3 级别
```

那么可以手工改变当前的运行级别吗？当然可以了，只要使用 init 命令（注意着不是 init 进程）

即可，命令如下：

```javascript
[root@localhost ~]# init 5
#进入图形界面，当然要已经安装了图形界面才可以
[root@localhost ~]# init 0
#关机
[root@localhost ~]# init 6
#重启动
```

不过要注意使用 init 命令关机和重启动，并不是太安全，容易造成数据丢失。所以推荐大家还

是使用 shutdown 命令进行关机和重启吧！

# ****

## **2、系统默认运行级别**



知道了运行级别的作用，我们回到系统启动过程中来。/etc/init/rcS.conf 配置文件调用

/etc/inittab 配置文件的目的就是为了确定系统的默认运行级别，也就是系统一开机后会进入那个运

行级别。这个文件的内容如下：

```javascript
[root@localhost ~]# vim /etc/inittab
# inittab is only used by upstart for the default runlevel.
#
# ADDING OTHER CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.
#
# System initialization is started by /etc/init/rcS.conf
#系统会先调用/etc/init/rcS.conf
# Individual runlevels are started by /etc/init/rc.conf
#再调用/etc/init/rc.conf，在不同的运行级别启动不同的服务
# Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf
#通过这个配置文件判断 Ctrl+Alt+Delete 热启动键是否可用
# Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,
# with configuration in /etc/sysconfig/init.
#判断系统可以启动的本地终端数量，及终端的基本设置（如颜色）
# For information on how to write upstart event handlers, or how
# upstart works, see init(5), init(8), and initctl(8).
#
# Default runlevel. The runlevels used are:
# 0 - halt (Do NOT set initdefault to this)
# 1 - Single user mode
# 2 - Multiuser, without NFS (The same as 3, if you do not have networking)
# 3 - Full multiuser mode
# 4 - unused
# 5 - X11
# 6 - reboot (Do NOT set initdefault to this)
#很眼熟吧，就是刚刚的 0-6 的运行级别的说明
id:3:initdefault:
#这就是系统的默认运行级别，也就是系统开机后直接进入哪个运行级别
```

注意这里的默认运行级别只能写 3 或 5，其他的级别要不就是关机重启，要不就是保留或单用户，都不能作为系统默认运行级别的。



# **3、 /etc/rc.d/rc.local 文件**

这个配置文件会在用户登陆之前读取，这个文件中写入什么命令，在每次系统启动时都会执行一次。也就是说，我如果有任何需要在系统启动就运行的工作，只需要写入/etc/rc.d/rc.local 这个配置文件即可。这个文件内容如下：

```javascript
[root@localhost ~]# ll /etc/rc.local
lrwxrwxrwx. 1 root root 13 4 月 10 21:46 /etc/rc.local -> rc.d/rc.local
#有个链接文件，两个文件修改哪一个都可以
[root@localhost ~]# vi /etc/rc.d/rc.local
#!/bin/sh

# This script will be executed *after* all the other init scripts.
# You can put your own initialization stuff in here if you don't
# want to do the full Sys V style init stuff.
touch /var/lock/subsys/local
#默认会 touch 这个文件，每次系统启动时 touch 这个文件，这个文件的修改时间就是系统的启动时间了。
/etc/rc.d/init.d/httpd start
#如果写入 RPM 包安装的 apache 的启动命令，apache 服务就会开机时自动启动了。
```