# 1、进程的 nice值

# 2、Linux进程调度及多任务

每个CPU(或CPU核心)在一个时间点上只能处理一个进程，通过时间片技术，Linux实际能够运行的进程

(和线程数)可以超出实际可用的CPU及核心数量。Linux内核进程调度程序将多个进程在CPU核心上快速

切换，从而给用户多个进程在同时运行的假象。

# 3、相对优先级nice

由于不是每个进程都与其他进程同样重要，可告知进程调度程序为不同的进程使用不同的调度策略。常

规系统上运行的大多数进程所使用的的调度策略为

一些调度策略用于不同的目的。SCHED_OTHER调度策略运行的进程的相对优先级称为进程的nice值，

可以有40种不同级别的nice值。

![](images/WEBRESOURCE431550d58133e655d9b5ccf48de243aa截图.png)

# 4、查看进程的nice级别

## 1，使用top查看nice级别

**top命令**

```
[root@server1 ~]# top
。。。。。。

   PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND                                                                                  
     1 root      20   0  193556   6572   4136 S   0.0  0.4   0:01.48 systemd                                                                                  
     2 root      20   0       0      0      0 S   0.0  0.0   0:00.01 kthreadd                                                                                 
     3 root      20   0       0      0      0 S   0.0  0.0   0:00.02 ksoftirqd/0  
```

## 2,使用ps查看nice级别

[root@localhost ~]# ps axo pid,command,nice --sort=nice

[root@localhost ~]# ps axo pid,command,nice,cls --sort=-nice

# 5、启动具有不同nice级别的进程

启动进程的时候为进程指定nice值

启动进程时，通常会继承父进程的nice级别，默认为0

```
[root@server1 ~]#nice [-n 数字] command
选项和参数：
    -n:后面接一个数值，数值的范围是：-20~19；
```

**nice -n -5 vim &，用root给一个nice值为-5，用于执行vim，并查看该进程**

```
[root@server1 ~]# nice -n -5 vim &
[1] 7553
[root@server1 ~]# ps -l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0   7188   7183  0  80   0 - 28990 do_wai pts/0    00:00:00 bash
4 T     0   7553   7188  0  75  -5 - 36789 do_sig pts/0    00:00:00 vim
0 R     0   7556   7188  0  80   0 - 38309 -      pts/0    00:00:00 ps
**#原本的bash PRI为780，，所以vim的PRI应为80，不过由于给予的nice为-5，**
**#因此vim的PRI降低了，PRI与NI个减5，但不一定每次都正好相同，因为内核会动态调整。**
[root@server1 ~]# kill -9 %1    #测试完毕，关闭vim

[1]+  已停止               nice -n -5 vim
[root@server1 ~]# 
[1]+  已杀死               nice -n -5 vim
```

# 6、更改现有进程的nice级别

更改正在运行的进程的nice值

## 1，使用top更改nice级别

## 2，使用shell更改nice级别

```
[root@server1 ~]# renice [number] PID
选项和参数：
    -PID:某个进程的PID
```

### 范例1：找出自己的bash PID，并将该PID的nice调整到 -5

```
[root@server1 ~]# ps -l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0   7188   7183  0  80   0 - 29010 do_wai pts/0    00:00:00 bash
0 R     0   7624   7188  0  80   0 - 38309 -      pts/0    00:00:00 ps
[root@server1 ~]# renice -5 7188
7188 (进程 ID) 旧优先级为 0，新优先级为 -5
[root@server1 ~]# ps -l
F S   UID    PID   PPID  C PRI  NI ADDR SZ WCHAN  TTY          TIME CMD
4 S     0   7188   7183  0  75  -5 - 29010 do_wai pts/0    00:00:00 bash
0 R     0   7626   7188  0  75  -5 - 38309 -      pts/0    00:00:00 ps
```