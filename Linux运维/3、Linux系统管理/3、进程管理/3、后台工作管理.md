# **1**** 工作管理简介
**

后台管理有几个事项需要大家注意：


```javascript
 前台是指当前可以操控和执行命令的这个操作环境，后台是指工作可以自行运行，但是不能直接用 ctrl+c 来终止它，只能使用 fg/bg 来调用工作；
 当前的登录终端，只能管理当前终端的工作，而不能管理其他登录终端的工作。如 tty1 登录的终端是不能管理 tty2 终端中的工作的；
 放入后台的命令必须可以持续运行一段时间，这样我们才能扑捉和操作这个工作。如果把 ls命令放入后台执行，它很快就会执行完成，我们很难操作它。
 放入后台执行的命令不能和前台用户有交互或需要前台输入，否则放入后台只能暂停，而不能执行。比如 vi 命令放入后台只能暂停，而不能执行，因为 vi 需要前台输入信息。
top 命令也不能放入后台执行，而只能放入后台暂停，因为 top 命令需要和前台有交互。
```

## **2 如何把命令放入后台
**

那么我们如何把命令放入后台呢？有两种方法，分别如下：


- 1)、 第一种方法是**“命令 &”**，把命令放入后台执行


第一种把命令放入后台的方法是在命令后面加入

是执行状态。但是注意，放入后台执行的命令不能与前台有交互，否则这个命令是不能在后台执行的。


举个例子：

```javascript
[root@localhost ~]# find / -name install.log &
[1] 1920
# [工作号] 进程号
#find 命令放入后台执行，每个后台命令会分配一个工作号，命令既然可以执行，就会有进
#程产生，所以也会有进程号。
```

这样的话，虽然 find 命令在执行，但是当前终端我还是可以进行其他命令操作的。如果在终端


上出现：

```javascript
[1]+ Done find / -name install.log
```

证明后台这个任务已经完成了，当然命令如果有执行结果的话，也会显示到操作终端上。[1]是


这个命令的工作号，+号代表这个任务是最近一个被放入后台的工作。

2)、 第二种方法是在命令执行过程中按

使用这种方法放入后台的命令，就算是不和前台有交互，能在后台执行的命令，也是暂停状态，


ctrl+z 快捷键就是暂停的快捷键。举几个例子：


例 1：


```javascript
[root@localhost ~]# top
#在 top 命令执行的过程中，按下 ctrl+z 快捷键
[1]+ Stopped top
#提示命令被放入后台，工作号是 1，状态是暂停。而且虽然 top 命令没有结束，也能取得
#控制台权限。
```

例 2：


```javascript
[root@localhost ~]# tar -zcf etc.tar.gz /etc
#压缩一下/etc/目录
tar: 从成员名中删除开头的“/”
tar: 从硬连接目标中删除开头的“/”
^Z  执行的过程中，按下 ctrl+z 快捷键
[2]+ Stopped tar -zcf etc.tar.gz /etc
#命令被放入后台，工作号是 2，状态是暂停。
```

# **3 后台命令管理
**

## **3.1 jobs查看后台的工作
**

```javascript
[root@localhost ~]# jobs [-l]
选项：
-l： 显示工作的 PID  ,list
-r:  显示正在执行的任务,running 
-s:  显示已经暂停的任务,stoped
```

## **3.2 fg(foreground,前台）将后台暂停的工作恢复到前台执行****（在前台执行）****
**

```javascript
[root@localhost ~]# fg %工作号
参数：
%工作号： %号可以省略，但是注意工作号和 PID 的区别
```

## **3.3 bg(background,后台）把后台暂停的工作恢复到后台执行****（在后台执行）****
**

```javascript
[root@localhost ~]# bg %工作号
```

## **3.4 nohup后台命令脱离登录终端运行
**

**nohup 英文全称 no hang up（不挂起），用于在系统后台不挂断地运行命令，退出终端不会影响程序的运行。**

我们已经知道把命令放入后台，只能在当前登录终端执行。那如果我是远程管理的服务器，在远


程终端中执行了后台命令，这时我退出登录，这个后台命令还能继续执行吗？当然是不行的，这个后


台命令会被终止。但是我们确实需要在远程终端中执行某些后台命令，该如何执行呢？


```javascript
 第一种方法是把需要后台执行的命令加入/etc/rc.local 文件，让系统在启动时执行这个后
  台程序。这种方法的问题是，服务器时不能随便重启的，万一有临时后台任务，就不能执行。
 第二种方法是使用系统定时任务，让系统在指定的时间执行某个后台命令。这样放入后台的
  命令与终端无关，是不依赖登录终端的。
 最后一种方法是使用 nohup 命令。
```

nohup 命令的作用就是让后台工作在离开操作终端时，也能够正确的在后台执行。命令的格式如


下：


```javascript
[root@localhost ~]# nohup [命令] &
例如：
[root@localhost ~]# nohup find / -print > /root/file.log &
[3] 2349  用 find 命令，打印/下所有文件。放入后台执行
[root@localhost ~]# nohup: 忽略输入并把输出追加到"nohup.out"
#有提示信息
```