# 1、搭建第一个网站

- 编写虚拟主机配置文件

```
[root@www conf.d]# vim /etc/nginx/conf.d/www.conf
server {
 listen   *:8080;
 server_name www.eagle.com;
 location / {
 root /usr/share/nginx/html;
 index ealgeslab.html;
}
}
```

- 编写网站代码（这是开发需要关心的事情，这里以简略内容代替）

```
[root@www ~]# cat /usr/share/nginx/html/ealgeslab.html
OK!第一个网站没有问题
```

- 赋予网站代码权限

```
[root@www ~]# chmod 777 /usr/share/nginx/html/ealgeslab.html 
```

- 编写hosts文件，做好域名解析(如果windows需要访问也要在这个目录下的hosts文件做相同操作

C:\Windows\System32\drivers\etc)

```
[root@www ~]# cat /etc/hosts
...
192.168.33.133 www.eagle.com
...
[root@www ~]# ping www.eagle.com
PING www.eagle.com (192.168.33.133) 56(84) bytes of data.
64 bytes from www.eagle.com (192.168.33.133): icmp_seq=1 ttl=64 time=0.026 ms
64 bytes from www.eagle.com (192.168.33.133): icmp_seq=2 ttl=64 time=0.049 ms
......
```

- 重启nginx服务（使用reload平滑重启，以下两种方式不要混用）

```
[root@www html]# systemctl reload nginx.service
[root@www html]# nginx -s reload
```

- 访问测试

```
[root@www ~]# curl www.eagle.com:8080
OK!第一个网站没有问题
```

# 2、利用nginx服务搭建多个网站

- 准备好配置文件

```
[root@www conf.d]# ll
总用量 12
-rw-r--r--. 1 root root 107 9月  25 16:45 bbs.conf
-rw-r--r--. 1 root root 109 9月  25 16:45 blog.conf
-rw-r--r--. 1 root root 107 9月  25 16:44 www.conf
[root@www conf.d]# cat *.conf
server {
 listen   *:8080;
 server_name bbs.eagle.com;
 location / {
 root /html/bbs;
 index index.html;
}
}
server {
 listen   *:8080;
 server_name blog.eagle.com;
 location / {
 root /html/blog;
 index index.html;
}
}
server {
 listen   *:8080;
 server_name www.eagle.com;
 location / {
 root /html/www;
 index index.html;
}
}
```

- 准备站点目录以及首页文件

```
[root@www bbs]# mkdir -p /html/{www,bbs,blog}
[root@www bbs]# for name in {www,bbs,blog};do echo "<h1> $name </h1>" >
/html/$name/index.html;done;
```

- 赋予网站代码权限

```
[root@www ~]# chmod -R 777 /html
[root@www ~]# setenforce 0
```

- 准备域名解析

```
[root@www bbs]# cat /etc/hosts
192.168.33.133 www.eagle.com bbs.eagle.com blog.eagle.com
```

- 重启nginx

```
[root@www html]# systemctl reload nginx.service 
```

- 访问测试

```
[root@www ~]# curl www.eagle.com:8080
<h1> www </h1>
[root@www ~]# curl bbs.eagle.com:8080
<h1> bbs </h1>
[root@www ~]# curl blog.eagle.com:8080
<h1> blog </h1>
```