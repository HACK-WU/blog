# 1、为什么要进行服务托管

独立服务：独立启动脚本ssh ftp nfs dns…

依赖服务：没有独立的启动脚本rsync telnet依赖xinetd服务（独立服务）

- 1.平时不占用系统的运厅资原

- 2.xinetd服务管理依赖服务

- 3.一些轻量级服务会托管给xinetd服务

# 2、如何托管

- 第一步：在系统中安装xinetd.

```
[root@server1 ~]# yum install  -y xinetd
1、查看软件类别
[root@jumper ~]rpm -ql xinetd
/etc/rc.d/init.d/xinetd
/etc/xinetd.conf
/etc/xinetd.d    //xinetd服务管理的所有轻量级服务的目录
/usr/sbin/xinetd
/usr/share/man/man5/xinetd.conf.5.gz
2、查看rsync软件列表
[root@jumper ~]rpm -ql rsync
/etc/xinetd.d/rsync
/usr/bin/rsync
```

- 第二步：编写xinetd.conf文件(/etc/xinetd.conf)

```
vim /etc/xinetd.conf
defaults
{
only_from        只允许访问
no_access        拒绝访问
access_times     制访问服务的时间段
log_type         指定日志类型
interface        并发连接数
per_source       每个IP的最大连接数
}
includedir /etc/xinetd.d
```

- 第三步：手工创建/etc/xinetd.d/rsync

```
service rsync
{
disable = no    //开关；no表示开启该服务；yes表示关闭服务
flags = IPv6    //可以支持IPV6
socket_type = stream    //套接字类型
wait = no
user = root
server = /usr/bin/rsync    //服务
server_args = --daemon
log_on_failure += USERID
}
```

- 第四步：重启xinetd服务（xinetd服务重启后，rsync服务也会随之重启，检查端口占用）

```
[root@server1 ~]# systemctl  start  xinetd.service 
[root@server1 ~]# ss -antp|grep 873
LISTEN     0      64          :::873                     :::*                   users:(("xinetd",pid=11901,fd=5))
```

**在查询873端口占用时，发现只有xinetd)服务，没有rsync服务，原因：rsync->xinetd**