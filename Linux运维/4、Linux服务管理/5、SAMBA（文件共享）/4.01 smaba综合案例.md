**Samba 综合案例**

搭建一个SAMBA服务，共享一个目录/samba/share,客户端使用user01/123通过windows或者Linux可以在该目录里创建文件删除文件

# 1、安装Samba 

```
yum install -y samba 
rpm -ql samba
```

## 2、创建共享目录

```
mkdir -p /share/samba
```

# 3、编辑配置文件

```
# vim /etc/samba/smb.conf
[smb_share]
comment = samba service
path = /samba/share
guest ok = no
writable = yes
或者
[samba_share]
path = /samba/share   #共享文件的路径
public = no            #不公开
writable = yes          #可写
```

# 4、创建本地用户并且加入到Samba数据库里

- 创建user01用户，然后添加到Samba认证中，设置密码为123（使用smbpasswd设置密码）

```
[root@server1 ~]# useradd user01
[root@server1 ~]# smbpasswd -a user01    #
New SMB password:
Retype new SMB password:
Added user user01.
```

以上操作完成后，则SAMBA系统增加了一个user01的账号和123的密码

```
root@server1 ~# pdbedit -L        #查看Samba数据库中的用户信息
user01:1002:
```

**因为samba用户是基于Linux的系统用户的，所以在添加samba用户前需要先创建Linux系统用户，否则添加samba用户将失败。**

# **5、启动nmb和smb服务**

```
root@server1 ~# systemctl  start nmb
root@server1 ~# systemctl  start smb
```