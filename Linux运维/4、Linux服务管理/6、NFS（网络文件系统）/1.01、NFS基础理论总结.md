# 1、NFS服务介绍

NFS ( Network File System）网络文件系统

- 主要用于linux系统上实现文件共享的一种协议，其客户端主要是Linux

- 没有用户认证机制，且数据在网络上传送的时候是**明文传送**，一般只能在局域网中使用

- ·支持多节点同时挂载及并发写入

**企业应用：为集群中的web server提供后端存储**

# **2、NFS组成**

- rpcbind	/**负责NFS的数据传输，**远程过程调用 tcp/udp协议端口**111**

- nfs-utils	/控制共享哪些文件,权限管理

RPC（Remote Procedure Call Protocol ) :

- **远程过程调用协议**，它是一种通过网络从远程计算机程序上请求服务，不需要了解底层网技术的协议。

# 3、与NFS相关的软件包（系统默认安装）

```
nfs-utils-1.2.3-26.el6.x86_64		nfs服务的一个脚本控制工具（服务端与客户端）
nfs4-adl-tools-e.3.3-6.el6.x86_64	acl 工具包
nfs-utils-lib-1.1.5-4.e16.x86_64	nfs 库文件
```

# 4、安装NFS软件

```
root@server1 ~# yum install  -y nfs-utils  rpcbind 
```

# 5、NFS配置

```
vim /etc/exports
man 5 exports
共享目录      共享选项
/nfs/share    *(ro,sync)
I
#共享主机：
*                                      代表所有主机
192.168.0.0/24：                       代表共享给某个网段
192.168.0.0/24(rw)  192.168.1.0/24(ro) :代表共享给不同网段
192.168.0.254：                         共享给某个IP
*.itcast.com:                          代表共享给某个域下的所有主机
#共享选项：
ro：          只读,read only
rw：          读写,read write
sync：        实时同步，直接写入磁盘
async：        异步，先缓存在内存再同步磁盘
anonuid：        设置访问nfs服务的用户的uid，uid需要在/etc/passwd中存在
anongid：        设置访问nfs服务的用户的gid
root-squash ：     默认root用户创建文件的厘主和国组都变成nfsnobodv 其他人nfs-server端是它自己，client端是nobody。
no_root_squash：    root用户创建的文件属主和属组还是root，其他人server端是它自己uid,client端是nobody。
all_squash:        不管是root还是其他普通用户创建的文件的属主和属组都是nfsnobody
说明：
anonuid和anongid参数和all_squash-起使用。
oll souash表示不管是root还是其他普通用户从客户端所创建的文件在服务哭端的拥有者和所屡
组有是nfsnobody；服务活为了对文件似相应官理，可以议直anonuid和anongid进口指定的
拥有者和所属组
```

## sync 和async区别:

- sync：

- 同步写入数据，写入数据时，立即将数据写入磁盘。

- 特点，写入时，系统压力可能比较大。但是比较安全。

- async:

- 异步写入数据，写入数据时，先将数据写入内存，再挑选何时时机，将数据吸入磁盘。

- 特点，写入时，系统压力可能比较小。但是风险更大。因为没有立即写入磁盘