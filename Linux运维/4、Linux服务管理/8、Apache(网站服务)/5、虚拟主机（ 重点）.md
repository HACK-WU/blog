**虚拟主机（ 重点）**

虚拟主机，也叫“网站空间”，就是把一台运行在互联网上的物理服务器划分成多个“虚拟”服务器。

虚拟主机技术极大的促进了网络技术的应用和普及。同时虚拟主机的租用服务也成了网络时代的一种

新型经济形式。



**虚拟主机的分类：**

基于 IP 的虚拟主机：一台服务器，多个 ip，搭建多个网站

基于端口的虚拟主机：一台服务器，一个 ip，搭建多个网站，每个网络使用不同端口访问

**基于域名的虚拟主机：一台服务器，一个 ip ，搭建多个网站，每个网站使用不同域名访问**

**实验准备：**

# **1. 域名解析：准备两个域名**

www.sohu.com

www.sina.com

#使用本地 hosts 文件进行解析

```javascript
[root@bogon ~]# vi /etc/hosts

127.0.0.1   localhost localhost.localdomain localhost4 localhost4.localdomain4
::1         localhost localhost.localdomain localhost6 localhost6.localdomain6

192.168.1.105  www.sohu.com  	 #添加
192.168.1.105  www.sina.com	 #添加

```

# **2. 网站主页目录规划**

在/htdocs/目录下分别创建 sohu 和 sina 两个目录，并在新建目录内创建 index.html 文件（分别写



不一样的内容）

**试验步骤 ：**

## **1） 修改主配置文件开启文件关联**

## ****

```javascript
# vi /usr/local/apache2/etc/httpd.conf
Include etc/extra/httpd-vhosts.conf 	#此行取消注释
```

## **Centos7中的包含的其他配置文件的设置为：**

IncludeOptional conf.d/*.conf

## **2.）编辑子配置文件，编写虚拟主机标签**

如果vhosts.conf文件不存在，可以自己创建

## ****

```javascript
# vi /usr/local/apache2/etc/extra/httpd-vhosts.conf
添加下方内容，有几个虚拟主机就写几组（添加之前先把原先存在的示例删除掉）

<Directory "/usr/local/apache2/htdocs/sina">    #目录权限标签
Options Indexes FollowSymLinks
AllowOverride None
Require all granted
</Directory>

#目录权限标签根据需要自行添加
<VirtualHost 192.168.88.10:80> #虚拟主机标签
ServerAdmin webmaster@sina.com #管理员邮箱
DocumentRoot "/usr/local/apache2/htdocs/sina" #网站主目录
ServerName www.sina.com #完整域名
ErrorLog "logs/sina-error_log" #错误日志
CustomLog "logs/sina-access_log" common #访问日志
</VirtualHost>
```

## **3)	重启服务，验证结果**

- Windows 下：浏览器下输入两个不同的域名验证网页内容（提前修改 windows 的 hosts 文件）

- 路径：C>Windows>System32>dirves>etc>hosts



- Linux 下：通过 elinks/curl 命令验证：elinks/curl URL 地址（提前修改 Linux的 hosts 文件）