**域名跳转**

一个站点难免会有多个域名，而多个域名总得有一个主次，比如我的网站可以用两个域名访问：

www.sina.com 和 www.sohu.cn 但大家发现不管我用哪个域名访问，最终都会跳转到 www.sina.com 上

来。这个行为就叫做域名跳转，状态码：301 是永久跳转，302 是临时跳转，网站上一定要设置为 301，

这样对搜索引擎是比较友好的。



# **一、实验条件：**

## **1. 虚拟主机能正常访问**

## **2. 打开主配置文件开启重写模块 **

## ****

```javascript
LoadModule rewrite_module modules/mod_rewrite.so   #取消注释
```

# **二、实验步骤：**

## **1. 修改虚拟主机配置文件**

```javascript
# vi */extra/httpd-vhosts.conf
<Directory "/usr/local/apache2/htdocs/sohu">
Options Indexes FollowSymLinks
AllowOverride All
Require all granted
</Directory>
```

## **2. 创建规则匹配文件**

```javascript
 cd /usr/local/apache2/htdocs/sohu
 vi  .htaccess
#在指定的网站目录下创建文件，并添加以下内容

RewriteEngine on
# 开启rewrite功能
RewriteCond %{HTTP_HOST} ^www.sohu.com
# 把以www.sina.com 开头的内容赋值给HTTP_HOST变量
RewriteRule ^(.*)$ http://www.sina.com/$1 [R=permanent,L]
# ^(.*)$ 指代客户端要访问的资源
# $1 把 .* 所指代的内容赋值到$1变量中
# R=permanent 永久重定向 = 301
# L 指定该规则为最后一条生效的规则，以后的不再生效#
```

## **3. 重启服务器并测试**

```javascript
/usr/local/apache2/bin/apachectl -t
/usr/local/apache2/bin/apachectl stop
/usr/local/apache2/bin/apachectl start
```

通过上述测试，发现无论是 sina 或 sohu 最终都是访问到 www.sina.com 域名上来则试验成功

4.测试：

```javascript
elinks www.sina.com
elinks www.sohu.com
```