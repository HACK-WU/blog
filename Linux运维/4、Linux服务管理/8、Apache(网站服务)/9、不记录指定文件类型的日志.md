不记录指定文件类型的日志


如果一个网站访问量特别大，那么访问日志就会很多，但有一些访问日志我们其实是可以忽略掉的，


比如网站的一些图片，还有 js、css 等静态对象。而这些文件的访问往往是巨量的，而且即使记录这


些日志也没有什么用，那么如何忽略不记录这些日志呢？





# 1 、配置日志不记录图片的访问


```javascript
# vim /usr/local/apache2/conf/httpd.conf
```

相关配置为：


```javascript
SetEnvIf Request_URI ".*\.gif$" image-request
SetEnvIf Request_URI ".*\.jpg$" image-request
SetEnvIf Request_URI ".*\.png$" image-request
SetEnvIf Request_URI ".*\.bmp$" image-request
SetEnvIf Request_URI ".*\.swf$" image-request
SetEnvIf Request_URI ".*\.js$" image-request
SetEnvIf Request_URI ".*\.css$" image-request
CustomLog "|/usr/local ... _%Y%m%d.log 86400" combined env=!image-request
```

说明：在原来的访问日志配置基础上，增加了一些 image-request 的定义，比如把 gif、jpg、bmp、


swf、js、css 等结尾的全标记为 image-request，然后在配置日志后加一个标记 env=!image-request，


表示取反。