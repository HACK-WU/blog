**调度算法**

# 1、轮询调度

这种算法是最简单的，就是按依次循环的方式将请求调度到不同的服务器上，该算法最大的特点就是简

单。轮询算法假设 所有的服务器处理请求的能力都是一样的，调度器会将所有的请求平均分配给每个真

实服务器，不管后端 RS 配置和处理 能力，非常均衡地分发下去。

# 2、加权轮询调度

这种算法比 rr 的算法多了一个权重的概念，可以给 RS 设置权重，权重越高，那么分发的请求数越多，

权重的取值范围 0 – 100。主要是对rr算法的一种优化和补充， LVS 会考虑每台服务器的性能，并给每台

服务器添加要给权值，如果服务 器A的权值为1，服务器B的权值为2，则调度到服务器B的请求会是服务

器A的2倍。权值越高的服务器，处理的请求越多

# 3、目标地址hash

根据请求的目标IP地址，作为散列键(HashKey)从静态分配的散列表找出对应的服务器，若该服务器是可

用的且未超载， 将请求发送到该服务器，否则返回空。

# 4、源地址 hash

源地址散列”调度算法根据请求的源IP地址，作为散列键(HashKey)从静态分配的散列表找出对应的服务

器，若该服务器是 可用的且未超载，将请求发送到该服务器，否则返回空｡

# 5、最少链接

这个算法会根据后端 RS 的连接数来决定把请求分发给谁，比如 RS1 连接数比 RS2 连接数少，那么请求

就优先发给 RS1

# 6、加权最少链接

这个算法比 lc 多了一个权重的概念而已

# 7、最短延迟调度

在WLC基础上改进，Overhead = （ACTIVE+1）*256/加权，不再考虑非活动状态，把当前处于活动状

态的数目+1来 实现，数目最小的，接受下次请求，+1的目的是为了考虑加权的时候，非活动连接过多缺

陷：当权限过大的时候，会倒 置空闲服务器一直处于无连接状态。

# 8、NQ永不排队/最少队列调度

无需队列。如果有台 realserver的连接数＝0就直接分配过去，不需要再进行sed运算，保证不会有一个

主机很空间。在 SED基础上无论+几，第二次一定给下一个，保证不会有一个主机不会很空闲着，不考

虑非活动连接，才用NQ，SED要考 虑活动状态连接，对于DNS的UDP不需要考虑非活动连接，而httpd

的处于保持状态的服务就需要考虑非活动连接给服务 器的压力。

# 9、基于局部性的最少链接

基于局部性的最少链接”调度算法是针对目标IP地址的负载均衡，目前主要用于Cache集群系统｡该算法根

据请求的目标IP 地址找出该目标IP地址最近使用的服务器，若该服务器是可用的且没有超载，将请求发

送到该服务器;若服务器不存在， 或者该服务器超载且有服务器处于一半的工作负载，则用“最少链接”的

原则选出一个可用的服务器，将请求发送到该服务 器｡

# 10、带复制的基于局部性最少连接

带复制的基于局部性最少链接”调度算法也是针对目标IP地址的负载均衡，目前主要用于Cache集群系统｡

它与LBLC算法的 不同之处是它要维护从一个目标IP地址到一组服务器的映射，而LBLC算法维护从一个

目标IP地址到一台服务器的映射｡该 算法根据请求的目标IP地址找出该目标IP地址对应的服务器组，按”

最小连接”原则从服务器组中选出一台服务器，若服务 器没有超载，将请求发送到该服务器；若服务器超

载，则按“最小连接”原则从这个集群中选出一台服务器，将该服务器加 入到服务器组中，将请求发送到

该服务器｡同时，当该服务器组有一段时间没有被修改，将最忙的服务器从服务器组中删 除，以降低复

制的程度。