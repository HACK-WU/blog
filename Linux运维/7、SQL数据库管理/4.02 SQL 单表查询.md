# 1、回顾SQL查询语句

```
mysql> select */字段列表 from 数据表名称where 查询条件;
```

# 2、SQL查询五子句

- 基本语法

```
mysql> select * from 数据表 where 子句 group by子句 having 子句 order  by子句 limit 子句;
where    子句
group by 子句
having   子句
order by 子句
limit    子句
#特别注意：五子句的顺序是固定的，不能颠倒。
```

# 3、where 子句 (条件选择)

```
#符号                #说明
%                    匹配0个或任意多个字符,相当于正则中的".*"
_(下划线)            匹配单个字符，相当于正则中的"."
like                模糊匹配                        select * from tb_student where name like‘关%";
=                   等于,精确匹配                   select * from tb_student where id=3;
>                   大于                            select * from tb_student where age>25;
<                   小于
>=                  大于等于
<=                  小于等于
!=和<>              不等于                       select * from tb_student where gender != '男’;
!和 not             逻辑非
||和or              逻辑或                      select * from tb_student where id=1 or id=3 or id=5;
&&和and             逻辑与                      select * from tb_student where age>30 && gender='男';
between...and...    两者之间                    select * from tb_student where age between 18 and 25;
in (… )              在...                      select * from tb_student where id in (2,4,6);
not in (… )         不在
```

- like 模糊查询语句

- 类似于管道命令中的数据检索

```sql
mysql> use tb_admin;
mysql> create table tb_stsudent(
    id mediumint not null auto_increment,
    name varchar(10),
    age tinyint unsigned default 0,
    gender enum("男","女")
    address varchar(255),
    primary key(id)    
) engine=innodb default charset=utf8;
#插入测试数据
mysql> insert into tb_student values (null,"刘备",33,"男", "湖北省武汉市");
mysql> insert into tb_student values (null, "貂蝉",18,"女","湖南省长沙市");
mysql> insert into tb_student values (null, "关羽",32,"男", "湖北省荆州市");
mysql> insert into tb_student values (null,'大乔',20,"女","河南省漯河市");
mysql> insert into tb_student values (null,"赵云",25,"男" ,"河北省石家庄市");
mysql> insert into tb_student values (null,"小乔",18,"女" ,"湖北省荆州市");
```

1. 使用like模糊查询，获取姓"关"的同学信息

```
mysql> select * from tb_student where name like‘关%";
```

1. 案例: like模糊查询语句，查询名字中带"蝉"字的同学信息

```
mysql> select * from tb_student where name like '%蝉%’;
```

1. 案例: like模糊查询语句，查询云字结尾且名字为两个字的同学信息

```
mysql> select * from tb_student where name like "_云";
```

1. 案例：获取学生表中， id编号为3的同学信息

```
mysql> select * from tb_student where id=3;
```

1. 案例：获取年龄大于25周岁的同学信息I

```
mysql> select * from tb_student where age>25;
```

1. 案例：获取学生表中，性别不为男的同学信息（获取女同学的信息）

```
mysql> select * from tb_student where gender <>'男’;
```

1. 案例：获取班级中年龄大于30岁的男同学信息

```
mysql> select * from tb_student where age>30 && gender='男';
```

1. 案例：获取id值为1、3、5的同学信息

```
mysql> select * from tb_student where id=1 or id=3 or id=5;
```

1. 案例：获取年龄在18周岁~25周岁之间的同学信息

```
mysql> select * from tb_student where age>=18 and age<=25;
或
mysql> select * from tb_student where age between 18 and 25;
```

1. 案例：获取id值为2、4、6的同学信息

```
mysql> select * from tb_student where id in (2,4,6);
```

# 4、 distinct 数据去重

案例：获取tb_student学生表学员年龄的分布情况。

```
mysql> select distinct age from tb_student;
```

# 5、常见统计函数

| 统计函数 | 说明 | 举例 | 
| -- | -- | -- |
| max | 求最大值 | select max(age) from tb_student; | 
| min | 求最小值 | select min(age) from tb_student; | 
| sum | 求和 | select sum(id) from tb_student; | 
| avg | 求平均值 |   | 
| count | 求总行数 | select count(*) from tb_student; | 


- 案例：求tb_student表中一共有多少个记录

```
mysql> select count(*) from tb_student;
```

- 案例：求年龄的最大值与最小值

```
mysql> select max(age) from tb_student;
与
mysql> select min(age) from tb_student ;
```

- 案例：针对id字段求和

```
mysql> select sum(id) from tb_student;
```

- 案例：求学员表中年龄的平均值

```
mysql> select avg(age) from tb_student;
```

# 6、group by 子句 (分组)

- group by子句的作用：对数据进行分组操作，为什么要进行分组呢？分组的目标就是进行分组统计。

- 日常生活中的分组太多了，如按男女进行分组，按成绩进行分组，按院校、系部分组,按部门进行分组。

- 案例：求tb_student表中，男同学年龄的最大值与女同学年龄的最大值

```
mysql> select gender,max(age) from tb_student group by gender;
```

# 7、having 子句  (结果筛选)

- having与where类似，根据条件对 数据 进行过滤筛选

- where 针对表中的列 发挥作用，查询数据

- having 针对查询结果集发挥作用，筛选数据

```
mysql> create table tb_student(
id mediumint not null auto_increment,
name varchar(20),
age tinyint unsigned default 0,
gender enum( "男","女"),
subject enum('ui','java','yunwei','python' ),
primary key(id)
) engine=innodb default charset=utf8;
mysql> insert into tb_student values (null, "悟空",255,'男', 'ui');
mysql> insert into tb_student values (null, "八戒",250,'男','python');
mysql> insert into tb_student values (null,"唐僧",30,'男','yunwei' ) ;
mysql> insert into tb_student values (null, "沙僧",150,'男','java');
mysql> insert into tb_student values (null, '小白龙',100,'男' , 'yunwei');
mysql> insert into tb_student values (null,'白骨精',28,'女','ui');
mysql> insert into tb_student values (null, '免子精',22,'女','yunwei');
mvsql> insert into tb_student values (null,'狮子精',33 ,'男' ,'Yunwei');
```

```
mysql> select subject,count(***) from tb_student group by subject;**
```

- **案例: 求每个学科中，学科人数大于3人的学科信息**

```
**mysql> select subject,count(***) from tb_student group by subject having count(*)>3;
```

# 8、 order by 字句  (排序)

主要作用的就是对数据进行排序 (升序、降序)

- 升序 ASC：从小到大，1,2,3,4,5

```
mysql> select * from 数据表名称 ... order by 字段名称 asc;
```

- 降序 DESC: 从大到小, 5,4,3,2,1

```
mysql> select * from 数据表名称 ... order by 字段名称 desc;
```

- 案例：按年龄进行排序（由大到小）

```
mysql> select * from tb_student order by age desc;
```

# 9、 limit 子句  (限制查询数量)

基本用法：

```
mysql> select * from 数据表名称 ... limit number；查询满足条件的number条数据
    或
mvsol> select * from 数据表名称 . limit offset,number：从偏移量为offset开始查询，查询number条记录
```

- 案例: 获取学生表中，年龄最大的学员信息

```
mysql> select * from tb_student order by age desc limit 1;
```

- 案例：从偏移量为1的元素开始查询，查询2条记录

```
mysql> select * from tb_student limit 1,2;
```