**索引管理**

# 1、概述

索引支持在MongoDB中高效地执行查询。如果没有索引，MongoDB必须执行全集合扫描，即扫描集合

中的每个文档，以选择与查询语句 匹配的文档。这种扫描全集合的查询效率是非常低的，特别在处理大

量的数据时，查询可以要花费几十秒甚至几分钟，这对网站的性能是非 常致命的。

如果查询存在适当的索引，MongoDB可以使用该索引限制必须检查的文档数。 索引是特殊的数据结

构，它以易于遍历的形式存储集合数据集的一小部分。索引存储特定字段或一组字段的值，按字段值排

序。索引项的排 序支持有效的相等匹配和基于范围的查询操作。此外，MongoDB还可以使用索引中的

排序返回排序结果

# 2、索引类型

- 单字段索引

- MongoDB支持在文档的单个字段上创建用户定义的升序/降序索引，称为单字段索引（Single Field Index）。

- 复合索引

- MongoDB还支持多个字段的用户定义索引，即复合索引（Compound Index）。

- 其他索引

- 地理空间索引（Geospatial Index）、文本索引（Text Indexes）、哈希索引（Hashed Indexes）。

# 3、索引的管理操作

## 1）查看索引

```
> db.comment.getIndexes()
[
 {
    "v" : 2,
    "key" : {
      "_id" : 1
   },
    "name" : "_id_",
    "ns" : "articledb.comment"
 }
]
```

## 2）创建单字段索引

```
> db.comment.createIndex({userid:1}) 
```

## 3）创建复合索引

```
> db.comment.createIndex({userid:1,nickname:-1}) 
```

## 4）删除所有索引

```
> db.comment.dropIndex({}) 
```

## 5)删除指定索引

```
> db.comment.dropIndex({userid:1}) 
```