**存储引擎（重点）**

- 功能

- 数据读写

- 数据安全

- 提高性能

- 热备份

- 自动故障恢复

- 高可用方面支持

# **1、种类**

- InnoDB

- ⽀持事务，主要⾯向在线事务（OLTP）处理的应⽤；

- ⾏锁设计、⽀持外键、⽀持类似于Oracle的⾮锁定读；

- 从5.5.8版本开始，InnoDB存储引擎是默认的存储引擎；

- 将数据放在⼀个逻辑的表空间中，这个表空间就像⿊盒⼀样由InnoDB存储引擎⾃身进⾏管理；

- MyISAM

- 不⽀持事务、表锁设计、⽀持全⽂索引，主要⾯向OLAP数据库应⽤；

- 它的缓冲池只缓存索引⽂件，不缓存数据⽂件；

- MyISAM存储引擎表由MYD和MYI组成，MYD⽤来存放数据⽂件，MYI⽤来存放索引⽂件。

- MEMORY

- 在内存中存储所有数据，应用于对非关键数据由快速查找的场景。

- Memory类型的表访问数据非常快，因为它的数据 是存放在内存中的，并且默认使用HASH索

引，但是一旦服务关闭，表中的数据就会丢失

- 应用场景：快速定位记录

- ARCHIVE

- Archive存储引擎只⽀持INSERT和SELECT操作，从5.1开始⽀持索引；

- 使⽤zlib算法将数据⾏进⾏压缩后存储，压缩⽐⼀般可达1：10；

- ⾮常适合存储归档数据，如⽇志信息；

- 使⽤⾏锁来实现⾼并发的插⼊操作，但是其本身并不是事务安全的存储引擎，其设计主要⽬标

- 是提供告 诉的插⼊和压缩功能。

- FEDERATED

- Federated存储引擎表并不存放数据，它只是指向⼀台远程MySQL数据库服务器上的表。这⾮

- 常类似于 SQLServer的链接服务器和Oracle的透明⽹关，不同的是它只⽀持MySQL数据库表，不⽀持异构数据库 表。

- EXAMPLE

- 这种存储引擎用以保存阐明如何开始写新的存储引擎的 MySql 源码的例子。它主要针对于有

兴趣的开发人员。这 种存储引擎就是一个啥事也不做的 "存根"。你可以使用这种引擎创建

表，但是你无法向其保存任何数据，也无法从 它们检索任何索引。

- BLACKHOLE

- 黑洞存储引擎，类似于 Unix 的 /dev/null，Archive 只接收但却并不保存数据。对这种引擎的

表的查询常常返 回一个空集。这种表可以应用于 DML 语句需要发送到从服务器，但主服务器

并不会保留这种数据的备份的主从配置 中。

- MERGE

- 允许 MySql DBA 或开发者将一系列相同的 MyISAM 表进行分组，并把它们作为一个对象进行

引用。适用于超大规 模数据场景，如数据仓库。

- NDBCLUSTER

- 是⼀个集群存储引擎，类似于Oracle的RAC集群，不过其结构与Oracle的share everything不

同的 是，它使⽤的是share nothing的集群结构，可以提供更⾼的可⽤性；

- 数据全部放在内存中（从5.1版本开始，可以将⾮索引数据放在磁盘上）因此主键查找的速度

极快，并 且通过添加NDB数据存储节点可以线性地提⾼数据库性能，是⾼可⽤、⾼性能的集群系统；

- 其连接操作是在数据库层完成的，⽽不是在存储引擎层完成的。这意味着，复杂的连接操作需

要巨⼤的 ⽹络开销，因此查询速度很慢。

- CSV

- 它的表真的是以逗号分隔的文本文件。CSV 表允许你以 CSV 格式导入导出数据，以相同的读

和写的格式和脚本和 应用交互数据。由于 CSV 表没有索引，你最好是在普通操作中将数据放

在 InnoDB 表里，只有在导入或导出阶段 使用一下 CSV 表。

- Maria存储引擎

- 新开发的引擎，设计主要⽬标是⽤来取代原来的MyISAM存储引擎，从⽽成为MySQL的默认存储引 擎；

- ⽀持缓存数据和索引⽂件，应⽤了⾏锁设计，提供了MVCC功能，⽀持事务和⾮事务安全的选

项，以及 更好的BLOB字符类型的处理性能。

# 2、存储引擎相关操作

## 1）查看MySQL支持的存储引擎

```
MariaDB [(none)]> show engines\G;
*************************** 1. row ***************************
  Engine: InnoDB
  Support: DEFAULT
     .....
*************************** 2. row ***************************
  Engine: MRG_MYISAM
    Support: YES
     .....
*************************** 3. row ***************************
  Engine: MyISAM
  Support: YES
     .....
*************************** 4. row ***************************
  Engine: BLACKHOLE
  Support: YES
     .....
*************************** 5. row ***************************
  Engine: PERFORMANCE_SCHEMA
  Support: YES
     .....
*************************** 6. row ***************************
  Engine: CSV
  Support: YES
     .....
*************************** 7. row ***************************
  Engine: ARCHIVE
  Support: YES
     .....
*************************** 8. row ***************************
  Engine: MEMORY
  Support: YES
     .....
*************************** 9. row ***************************
  Engine: FEDERATED
  Support: YES
     .....
*************************** 10. row ***************************
  Engine: Aria
  Support: YES
```

## 2)查看默认存储引擎

```
MariaDB [(none)]> SELECT @@default_storage_engine;
+--------------------------+
| @@default_storage_engine |
+--------------------------+
| InnoDB          |
+--------------------------+
1 row in set (0.00 sec)
```

## 3)修改存储引擎

```
#在建表时指定
MariaDB [(none)]> create table ai(id bigint(12),name varchar(200))
ENGINE=MyISAM;
MariaDB [(none)]> create table country(id int(4),cname varchar(50))
ENGINE=InnoDB;
##也可以使用alter table语句，修改一个已经存在的表的存储引擎。
MariaDB [(none)]> alter table ai engine = innodb;
#在配置文件中指定
[root@node1 ~]# cat /etc/my.cnf
[mysqld]
default-storage-engine=INNODB
```

## 4)InnoDB与MyISAM存储引擎区别（面试题）

- InnoDB支持事务，支持行级别锁，支持热备，支持自动故障恢复，MVCC

- MyISAM 不支持事务，支持表级锁，支持温备份，不支持自动故障恢复和MVCC